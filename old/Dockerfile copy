FROM python:3.12.8-alpine3.21

# Configura o diretório de trabalho
WORKDIR /app

# Instala dependências necessárias
RUN apk add --no-cache \
  build-base \
  libpng-dev \
  freetype-dev \
  musl-dev \
  jpeg-dev \
  zlib-dev \
  tcl-dev \
  tk-dev

# Copia os arquivos necessários
COPY requirements.txt /app/
COPY app.py /app/

# Instala as dependências do Python
RUN pip install --no-cache-dir -r requirements.txt

# Define fuso horário
ENV TZ=America/Sao_Paulo

# Comando para rodar com Gunicorn
CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:80", "app:app"]
